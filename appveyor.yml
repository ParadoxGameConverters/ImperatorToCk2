version: dev.{build}
skip_tags: true
image: Visual Studio 2022
configuration: Release
build_script:
- cmd: >-
   git submodule update --init --recursive

   msbuild -m ImperatorToCK2.sln /logger:"C:\Program Files\AppVeyor\BuildAgent\Appveyor.MSBuildLogger.dll"
   
   cd ImperatorToCk2
   
   mvn package
   
   cp target/ImperatorToCK2.jar ../Release/ImperatorToCK2
   
   mkdir ../latest
   
   cp ../Release ../latest

artifacts:
- path: Release
  name: ImperatorToCK2-0.1Assyrian
- path: latest
  name: ImperatorToCK2-latest
deploy:
- provider: GitHub
  release: 0.1Assyrian
  description: Imperator to CK2 Version 0.1 - Assyrian
  auth_token:
    secure: x+rt6bMRW6SU5WAf7gkW6+TUtjtIP8eGKh/hlaoqm90PJSBdao9YLfOSkxGyHPTXRpt+ZuSZJCqhd4wQOrmLzejgoHHQHqg24KbE269Y/uY=
  repository: ParadoxGameConverters/ImperatorToCk2
  artifact: ImperatorToCK2-0.1Assyrian
  force_update: true
- provider: GitHub
  release: latest
  description: Imperator to CK2 Version - latest
  auth_token:
    secure: x+rt6bMRW6SU5WAf7gkW6+TUtjtIP8eGKh/hlaoqm90PJSBdao9YLfOSkxGyHPTXRpt+ZuSZJCqhd4wQOrmLzejgoHHQHqg24KbE269Y/uY=
  repository: ParadoxGameConverters/ImperatorToCk2
  artifact: ImperatorToCK2-latest
  force_update: true
